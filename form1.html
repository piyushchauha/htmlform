<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form1</title>
  </head>
  <body>
    <div class="maincontainer">
      <div class="subcontainer">
        <form id="form1"></form>
        <div id="displaytable"></div>
      </div>
    </div>
  </body>
  <script>
    let data = [];
    let form = document.getElementById("form1");
    let table = document.createElement("table");
    let tbody = document.createElement("tbody");
    let sub = document.createElement("button");

    const datainput = [
      { label: "Name:", id: "name", type: "text" },
      { label: "Email:", id: "email", type: "email" },
      { label: "Contact:", id: "contact", type: "tel" },
      {
        label: "Gender:",
        id: "gender",
        type: "radio",
        options: [
          { label: "Male", value: "male", name: "gender", id: "male" },
          { label: "Female", value: "female", name: "gender", id: "female" },
        ],
      },
      {
        label: "Hobby:",
        id: "hobby",
        type: "checkbox",
        options: [
          { label: "Gym", value: "gym", name: "hobby", id: "gym" },
          { label: "Music", value: "music", name: "hobby", id: "music" },
          { label: "Dance", value: "dance", name: "hobby", id: "dance" },
        ],
      },
      {
        label: "City",
        id: "city",
        type: "dropdown",
        options: [
          { label: "select city", value: "", name: "city", id: "selectcity" },
          {
            label: "Ahmedabad",
            value: "ahmedabad",
            name: "city",
            id: "ahmedabad",
          },
          { label: "Rajkot", value: "rajkot", name: "city", id: "rajkot" },
          { label: "Baroda", value: "baroda", name: "city", id: "baroda" },
        ],
      },
      { label: "Password:", id: "password", type: "password" },
      { label: "", id: "submitbtn", type: "submit" },
      // {
      //   label: "Actions",
      //   options: [
      //     { label: "Edit", id: "edit", type: "button" },
      //     { label: "Delete", id: "delete", type: "button" },
      //   ],
      // },
    ];

    // const subbtn = document.getElementById("submitbtn");

    // const gender1 = document.getElementById("gender");

    //Label
    // datainput.forEach((ele) => {
    //   let label = document.createElement("label");
    //   label.setAttribute("for", ele.id);
    //   label.innerHTML = ele.label + "<br>";
    //   let input = document.createElement("input");
    //   input.setAttribute("type", ele.type);
    //   input.setAttribute("id", ele.id);
    //   form.append(label);
    //   form.append(input);
    //   form.append(document.createElement("br"));
    // });

    function createform() {
      for (i = 0; i < datainput.length; i++) {
        if (datainput[i].label == "Actions") {
          continue;
        }
        let label = document.createElement("label");
        label.setAttribute("for", datainput[i].id);
        label.innerHTML = datainput[i].label + "<br>";
        form.append(label);

        if (!datainput[i].options) {
          let input = document.createElement("input");
          input.setAttribute("type", datainput[i].type);
          input.setAttribute("id", datainput[i].id);
          form.append(input);
        }

        if (datainput[i].type == "submit") {
          let sub = document.getElementById("submitbtn");

          sub.innerText = "Submit";
          sub.style.marginBottom = "10px";
          sub.addEventListener("click", submitdata);
        }

        if (datainput[i].type == "dropdown" && datainput[i].options) {
          let select = document.createElement("select");
          select.setAttribute("id", datainput[i].id);
          form.append(select);
          for (j = 0; j < datainput[i].options.length; j++) {
            let option = document.createElement("option");
            option.setAttribute("value", datainput[i].options[j].value);
            option.setAttribute("id", datainput[i].options[j].id);
            option.innerHTML = datainput[i].options[j].label;
            select.append(option);
          }
        }
        form.append(document.createElement("br"));

        // if (datainput[i].type == "checkbox" || datainput[i].type == "radio") {
        //   form.removeChild(input == "radio" ? input : input);
        // }
        // if (inputdata[i].type == "checkbox" || datainput[i].type == "radio") {
        //   let label1 = document.createElement("label");
        //   label1.innerHTML = "Gender";
        //   form.append(label1);

        // }

        if (
          (datainput[i].type == "radio" || datainput[i].type == "checkbox") &&
          datainput[i].options
        ) {
          for (j = 0; j < datainput[i].options.length; j++) {
            let optionlabel = document.createElement("label");
            optionlabel.innerHTML = datainput[i].options[j].label;
            let optioninput = document.createElement("input");
            optioninput.setAttribute("type", datainput[i].type);
            optioninput.setAttribute("id", datainput[i].options[j].id);
            optioninput.setAttribute("name", datainput[i].options[j].name);
            optioninput.setAttribute("value", datainput[i].options[j].value);
            form.append(optioninput);
            form.append(optionlabel);
            form.append(document.createElement("br"));
          }
        }
      }
      // let sub = document.createElement("button");
      // sub.setAttribute("type", "submit");
      // sub.innerHTML = "Submit";
      // sub.style.marginTop = "10px";
      // sub.style.marginBottom = "10px";
      // form.append(sub);
      // form.append(document.createElement("br"));
      // sub.addEventListener("click", submitdata);
    }
    // submit button
    // sub.setAttribute("type", "submit");
    // sub.innerHTML = "Submit";
    // sub.style.marginTop = "10px";
    // sub.style.marginBottom = "10px";
    // form.append(sub);
    // form.append(document.createElement("br"));

    //table
    function createtable() {
      // let table = document.createElement("table");
      document.getElementById("displaytable").append(table);
      table.style.border = "1px solid black";
      let thead = document.createElement("thead");
      // let tbody = document.createElement("tbody");

      for (i = 0; i < datainput.length; i++) {
        if (datainput[i].type == "submit") {
          continue;
        }
        let th = document.createElement("th");
        let tr = document.createElement("tr");
        th.innerHTML = datainput[i].label;
        th.style.border = "1px solid black";
        thead.append(th);
        th.append(tr);
        table.append(thead);
        table.append(tbody);
      }
      form.append(table);
    }

    function triggertable() {
      tbody.innerHTML = "";

      for (let i = 0; i < data.length; i++) {
        let tr = document.createElement("tr");

        for (let j = 0; j < datainput.length; j++) {
          let td = document.createElement("td");
          td.style.border = "1px solid black";
          if (datainput[j].type == "submit") {
            continue;
          }

          td.innerHTML += data[i][datainput[j].id] + " ";
          tr.append(td);
        }

        tbody.append(tr);
      }
      table.append(tbody);
    }
    // sub.addEventListener("click", submitdata);
    // document
    //   .getElementById("form1")
    //   .addEventListener("click", (e) => submitdata(e));

    // document
    //   .getElementById("submitbtn")
    //   .addEventListener("submit", (e) => onSubmit(e));
    // function onSubmit(e) {
    //   e.preventDefault();

    //   myobject = {};

    //   for (i = 0; i < datainput.length; i++) {
    //     let val = document.getElementById(datainput[i].id).value;
    //     myobject[datainput[i].id] = val;
    //   }
    //   data.push(myobject);
    //   console.log(data);
    //   triggertable();
    // }

    // function radiofun() {
    //   for (j = 0; j < datainput.length; j++) {
    //     for (let z = 0; z < datainput[j].options?.length; z++) {
    //       if (datainput[j].type == "checkbox" || datainput[j].type == "radio") {
    //         // data[i][datainput[j].options[z].id] = "";
    //         data[i][datainput[j].id] = "";
    //         if (document.getElementById(datainput[j].options[z].id).checked) {
    //           data[i][datainput[j].id] +=
    //             document.getElementById(datainput[j].options[z].id).value + " ";
    //         }
    //       }
    //     }
    //   }
    // }

    function submitdata(e) {
      e.preventDefault();
      myobject = {};

      for (i = 0; i < datainput.length; i++) {
        if (
          datainput[i].type == "checkbox" ||
          datainput[i].type == "radio"
          // datainput[i].type == "dropdown"
        ) {
          myobject[datainput[i].id] = "";
          for (let z = 0; z < datainput[i].options.length; z++) {
            if (document.getElementById(datainput[i].options[z].id).checked) {
              if (myobject[datainput[i].id] != "") {
                myobject[datainput[i].id] += ",";
              }
              myobject[datainput[i].id] +=
                document.getElementById(datainput[i].options[z].id).value + "";
              document.getElementById(
                datainput[i].options[z].id
              ).checked = false;
            } else if (datainput[i].type == "dropdown") {
              myobject[datainput[i].id] = document.getElementById(
                datainput[i].id
              ).value;
            }
          }
        } else {
          let val = document.getElementById(datainput[i].id).value;
          myobject[datainput[i].id] = val;
          if (datainput[i].type == "submit") continue;
          document.getElementById(datainput[i].id).value = "";
        }
      }
      data.push(myobject);
      console.log(data);
      triggertable();
    }
    createform();
    createtable();
  </script>
</html>
